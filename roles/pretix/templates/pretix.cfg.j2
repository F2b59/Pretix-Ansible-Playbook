; {{ ansible_managed }}

[pretix]
instance_name={{ pretix_instance_name }}
url=https://{{ pretix_domain_name }}
currency={{ pretix_currency }}
; DO NOT change the following value, it has to be set to the location of the
; directory *inside* the docker container
datadir=/data
trust_x_forwarded_for=on
trust_x_forwarded_proto=on

[locale]
default={{ pretix_locale }}
timezone={{ pretix_timezone }}

[database]
backend=postgresql
name=pretix
user=pretix
; Replace with the password you chose above
password={{ postgres_pretix_password }}
; In most docker setups, 172.17.0.1 is the address of the docker host. Adjust
; this to wherever your database is running, e.g. the name of a linked container.
host=172.17.0.1

[mail]
; See config file documentation for more options
from={{ smtp_sender_address }}
host={{ smtp_server_address }}
port={{ smtp_port }}
user={{ smtp_username }}
password={{ smtp_password }}
tls={{ smtp_tls }}
ssl={{ smtp_ssl }}
admins={{ pretix_admin_alert_email }}

[redis]
location=unix:///var/run/redis/redis.sock?db=0
; Remove the following line if you are unsure about your redis' security
; to reduce impact if redis gets compromised.
;sessions=true

[celery]
backend=redis+socket:///var/run/redis/redis.sock?virtual_host=1
broker=redis+socket:///var/run/redis/redis.sock?virtual_host=2

[metrics]
enabled=true
user={{ metrics_user }}
passphrase={{ metrics_password }}
